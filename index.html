<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peter Guan</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/assets/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg" />
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Peter Guan" />
    <link rel="manifest" href="/assets/site.webmanifest" />
    <!-- CSS -->
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/common.css">
</head>
<body>

<div id="nav-placeholder"></div>

<main class="main-content">
    <h1>Hi, I’m Peter Guan.</h1>
    <p>A developer and researcher passionate about Human-Computer Interaction and Web3.</p>
    <div class="action-links">
        <a href="/html/project.html" class="btn">See Projects</a>
        <a href="#" class="btn btn-secondary">About me</a>
    </div>
</main>

<!--
Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Etiam lobortis facilisis sem.
Nullam nec mi et neque pharetra sollicitudin. Praesent imperdiet mi nec ante. Donec
45 ullamcorper, felis non sodales commodo, lectus velit ultrices augue, a dignissim nibh
lectus placerat pede. Vivamus nunc nunc, molestie ut, ultricies vel, semper in, velit.
-->


<div id="footer-placeholder"></div>

<script>
    // 加载导航栏
    fetch('/html/nav.html')
        .then(res => res.text())
        .then(data => {
            document.getElementById('nav-placeholder').innerHTML = data;
        });

    // 加载页脚
    fetch('/html/footer.html')
        .then(res => res.text())
        .then(data => {
            document.getElementById('footer-placeholder').innerHTML = data;
        });
</script>

<script>

    // --- 新增的导航栏激活状态处理脚本 ---
    document.addEventListener('DOMContentLoaded', function() {
        // 等待导航栏加载完毕
        // 我们需要稍微延迟一下，确保 fetch 加载的 nav.html 已经插入到页面中
        setTimeout(() => {
            const currentPagePath = window.location.pathname;
            const navLinks = document.querySelectorAll('.nav-links a');

            navLinks.forEach(link => {
                const linkPath = new URL(link.href).pathname;

                if (currentPagePath === linkPath) {
                    link.classList.add('active');
                    // 为了最佳可访问性，添加 aria-current 属性
                    link.setAttribute('aria-current', 'page');

                    // (推荐) 阻止已激活链接的默认点击行为，避免刷新
                    link.addEventListener('click', (event) => {
                        event.preventDefault();
                    });
                }
            });
        }, 100); // 100毫秒的延迟通常足够了
    });
</script>
</body>

</html>
